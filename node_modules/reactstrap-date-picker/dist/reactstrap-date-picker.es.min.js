import e from"react";import{Button as t,InputGroup as a,Input as s,Popover as n,PopoverHeader as r,PopoverBody as o,InputGroupText as i}from"reactstrap";function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={exports:{}};function u(){}function d(){}d.resetWarningCache=u;h.exports=function(){function e(e,t,a,s,n,r){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:d,resetWarningCache:u};return a.PropTypes=a,a}();var m=h.exports;class g extends e.Component{constructor(e){super(e)}displayingMinMonth(){if(!this.props.minDate)return!1;var e=new Date(this.props.displayDate),t=new Date(this.props.minDate);return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()}displayingMaxMonth(){if(!this.props.maxDate)return!1;var e=new Date(this.props.displayDate),t=new Date(this.props.maxDate);return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()}handleClickPrevious(){var e=new Date(this.props.displayDate);e.setDate(1),e.setMonth(e.getMonth()-1),this.props.onChange(e)}handleClickNext(){var e=new Date(this.props.displayDate);e.setDate(1),e.setMonth(e.getMonth()+1),this.props.onChange(e)}render(){return e.createElement("div",{className:"rdp-header text-center"},e.createElement("div",{className:"text-muted rdp-header-previous-wrapper",onClick:()=>this.handleClickPrevious(),style:{cursor:"pointer",float:"left"}},this.displayingMinMonth()?null:this.props.previousButtonElement),e.createElement("span",null,this.props.monthLabels[this.props.displayDate.getMonth()]," ",this.props.displayDate.getFullYear()),e.createElement("div",{className:"text-muted rdp-header-next-wrapper",onClick:()=>this.handleClickNext(),style:{cursor:"pointer",float:"right"}},this.displayingMaxMonth()?null:this.props.nextButtonElement))}}g.propTypes={displayDate:m.object.isRequired,minDate:m.string,maxDate:m.string,onChange:m.func.isRequired,monthLabels:m.array.isRequired,previousButtonElement:m.oneOfType([m.string,m.object]).isRequired,nextButtonElement:m.oneOfType([m.string,m.object]).isRequired};var D=[31,28,31,30,31,30,31,31,30,31,30,31];class y extends e.Component{constructor(e){super(e)}handleClick(e){var t=e.currentTarget.getAttribute("data-day"),a=this.setTimeToNoon(new Date(this.props.displayDate));a.setDate(t),this.props.onChange(a)}handleClickToday(){var e=this.setTimeToNoon(new Date);this.props.onChange(e)}setTimeToNoon(e){return e.setHours(12),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}getWeekNumber(e){var t=new Date(e.valueOf()),a=(e.getDay()+6)%7;t.setDate(t.getDate()-a+3);var s=t.valueOf();return t.setMonth(0,1),4!==t.getDay()&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((s-t)/6048e5)}render(){var a=this.setTimeToNoon(new Date),s=this.props.selectedDate?this.setTimeToNoon(new Date(this.props.selectedDate)):null,n=this.props.minDate?this.setTimeToNoon(new Date(this.props.minDate)):null,r=this.props.maxDate?this.setTimeToNoon(new Date(this.props.maxDate)):null,o=this.props.displayDate.getFullYear(),i=this.props.displayDate.getMonth(),p=new Date(o,i,1),l=this.props.weekStartsOn>1?p.getDay()-this.props.weekStartsOn+7:1===this.props.weekStartsOn?0===p.getDay()?6:p.getDay()-1:p.getDay(),c=this.props.showWeeks,h=D[i];1==i&&(o%4==0&&o%100!=0||o%400==0)&&(h=29);for(var u=[],d=1,m=0;m<9;m++){for(var g=[],y=0;y<=6;y++)if(d<=h&&(m>0||y>=l)){var f=null,v=new Date(o,i,d,12,0,0,0).toISOString(),b=n&&Date.parse(v)<Date.parse(n),C=r&&Date.parse(v)>Date.parse(r),w=e=>this.handleClick(e),E={cursor:"pointer",padding:this.props.cellPadding,borderRadius:this.props.roundedCorners?5:0};b||C?(f="text-muted",w=null,E.cursor="default"):Date.parse(v)===Date.parse(s)?f="bg-primary":Date.parse(v)===Date.parse(a)&&(f="text-primary"),g.push(e.createElement("td",{key:y,"data-day":d,onClick:w,style:E,className:f},d)),d++}else g.push(e.createElement("td",{key:y}));if(c){var k=this.getWeekNumber(new Date(o,i,d-1,12,0,0,0));g.unshift(e.createElement("td",{key:7,style:{padding:this.props.cellPadding,fontSize:"0.8em",color:"darkgrey"},className:"text-muted"},k))}if(u.push(e.createElement("tr",{key:m},g)),d>h)break}var S=c?e.createElement("td",{className:"text-muted current-week",style:{padding:this.props.cellPadding}}):null;return e.createElement("table",{className:"rdp-calendar text-center"},e.createElement("thead",null,e.createElement("tr",null,S,this.props.dayLabels.map(((t,a)=>e.createElement("td",{key:a,className:"text-muted",style:{padding:this.props.cellPadding}},e.createElement("small",null,t)))))),e.createElement("tbody",null,u),this.props.showTodayButton&&e.createElement("tfoot",null,e.createElement("tr",null,e.createElement("td",{colSpan:this.props.dayLabels.length,style:{paddingTop:"9px"}},e.createElement(t,{block:!0,size:"sm",className:"u-today-button",onClick:()=>this.handleClickToday()},this.props.todayButtonLabel)))))}}y.propTypes={selectedDate:m.object,displayDate:m.object.isRequired,minDate:m.string,maxDate:m.string,onChange:m.func.isRequired,dayLabels:m.array.isRequired,cellPadding:m.string.isRequired,weekStartsOn:m.number,showTodayButton:m.bool,todayButtonLabel:m.string,roundedCorners:m.bool,showWeeks:m.bool};class f extends e.Component{constructor(t){if(super(t),this.props.value&&this.props.defaultValue)throw new Error("Conflicting DatePicker properties 'value' and 'defaultValue'");this._inputRef=e.createRef(),this.hiddenInputRef=e.createRef(),this.overlayContainerRef=e.createRef(),this.state=this.getInitialState(),this.idSuffix=this.makeIdSuffix()}getInitialState(){var e=this.makeDateValues(this.props.value||this.props.defaultValue);return this.props.weekStartsOn>1?e.dayLabels=this.props.dayLabels.slice(this.props.weekStartsOn).concat(this.props.dayLabels.slice(0,this.props.weekStartsOn)):1===this.props.weekStartsOn?e.dayLabels=this.props.dayLabels.slice(1).concat(this.props.dayLabels.slice(0,1)):e.dayLabels=this.props.dayLabels,e.focused=!1,e.inputFocused=!1,e.placeholder=this.props.placeholder||"",e.separator=this.props.dateFormat.match(/[^A-Z]/)[0],e}makeIdSuffix(){return null!=this.props.id&&""!=this.props.id?this.props.id:null!=this.props.name&&""!=this.props.name?this.props.name:(()=>{if("object"==typeof window){null==window._reactstrapDatePickerInstance&&(window._reactstrapDatePickerInstance=0);var e=window._reactstrapDatePickerInstance+1;return window._reactstrapDatePickerInstance=e,e}if("object"==typeof process){null==process._reactstrapDatePickerInstance&&(process._reactstrapDatePickerInstance=0);var t=process._reactstrapDatePickerInstance+1;return process._reactstrapDatePickerInstance=t,t}return console.error("Reactstrap Date Picker cannot determine environment (it is neither browser's <window> nor Node's <process>)."),1})().toString()}get inputRef(){return this.props.inputRef||this._inputRef}componentDidMount(){document.addEventListener("mousedown",this.onClickOutside.bind(this))}componentWillUnmount(){document.removeEventListener("mousedown",this.onClickOutside.bind(this))}onClickOutside(e){if(e.stopPropagation(),this.state.focused&&this.overlayContainerRef&&this.overlayContainerRef.current&&!this.overlayContainerRef.current.contains(e.target)){var t=this.inputRef&&this.inputRef.current&&this.inputRef.current.contains(e.target);if(this.setState({focused:!1,inputFocused:t}),this.props.onBlur){var a=document.createEvent("CustomEvent");a.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(a),this.props.onBlur(a)}}}makeDateValues(e){var t,a=e?new Date("".concat(e.slice(0,10),"T12:00:00.000Z")):null,s=this.props.minDate?new Date("".concat(this.props.minDate.slice(0,10),"T12:00:00.000Z")):null,n=this.props.maxDate?new Date("".concat(this.props.maxDate.slice(0,10),"T12:00:00.000Z")):null,r=e?this.makeInputValueString(a):null;if(a)t=new Date(a);else{var o=new Date("".concat((new Date).toISOString().slice(0,10),"T12:00:00.000Z"));t=s&&Date.parse(s)>=Date.parse(o)?s:n&&Date.parse(n)<=Date.parse(o)?n:o}return{value:a?a.toISOString():null,displayDate:t,selectedDate:a,inputValue:r}}clear(){this.props.onClear?this.props.onClear():this.setState(this.makeDateValues(null)),this.props.onChange&&this.props.onChange(null,null)}handleHide(){if(!this.state.inputFocused&&(this.setState({focused:!1}),this.props.onBlur)){var e=document.createEvent("CustomEvent");e.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(e),this.props.onBlur(e)}}handleKeyDown(e){if(9===e.which&&this.state.inputFocused&&(this.setState({focused:!1}),this.props.onBlur)){var t=document.createEvent("CustomEvent");t.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(t),this.props.onBlur(t)}}handleFocus(){if(!0!==this.state.focused){var e=this.getCalendarPlacement();if(this.setState({inputFocused:!0,focused:!0,calendarPlacement:e}),this.props.onFocus){var t=document.createEvent("CustomEvent");t.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(t),this.props.onFocus(t)}}}handleBlur(){this.setState({inputFocused:!1})}shouldComponentUpdate(e,t){return!(!0===this.state.inputFocused&&!1===t.inputFocused)}getValue(){return this.state.selectedDate?this.state.selectedDate.toISOString():null}getFormattedValue(){return this.state.displayDate?this.state.inputValue:null}getCalendarPlacement(){var e=Object.prototype.toString.call(this.props.calendarPlacement);return"[object AsyncFunction]"===e||"[object Function]"===e||"[object GeneratorFunction]"===e||"[object Proxy]"===e?this.props.calendarPlacement():this.props.calendarPlacement}makeInputValueString(e){var t=e.getMonth()+1,a=e.getDate(),s=this.state?this.state.separator:this.props.dateFormat.match(/[^A-Z]/)[0];return this.props.dateFormat.match(/MM.DD.YYYY/)?(t>9?t:"0".concat(t))+s+(a>9?a:"0".concat(a))+s+e.getFullYear():this.props.dateFormat.match(/DD.MM.YYYY/)?(a>9?a:"0".concat(a))+s+(t>9?t:"0".concat(t))+s+e.getFullYear():e.getFullYear()+s+(t>9?t:"0".concat(t))+s+(a>9?a:"0".concat(a))}handleBadInput(e){var t=e.replace(new RegExp("[^0-9".concat(this.state.separator,"]")),"").split(this.state.separator);this.props.dateFormat.match(/MM.DD.YYYY/)||this.props.dateFormat.match(/DD.MM.YYYY/)?(t[0]&&t[0].length>2&&(t[1]=t[0].slice(2)+(t[1]||""),t[0]=t[0].slice(0,2)),t[1]&&t[1].length>2&&(t[2]=t[1].slice(2)+(t[2]||""),t[1]=t[1].slice(0,2)),t[2]&&(t[2]=t[2].slice(0,4))):(t[0]&&t[0].length>4&&(t[1]=t[0].slice(4)+(t[1]||""),t[0]=t[0].slice(0,4)),t[1]&&t[1].length>2&&(t[2]=t[1].slice(2)+(t[2]||""),t[1]=t[1].slice(0,2)),t[2]&&(t[2]=t[2].slice(0,2))),this.setState({inputValue:t.join(this.state.separator)})}handleInputChange(){var e=this.inputRef.current.value,t=e.replace(/(-|\/\/)/g,this.state.separator).slice(0,10);if(t){var a,s,n;if(this.props.dateFormat.match(/MM.DD.YYYY/)){if(!t.match(/[0-1][0-9].[0-3][0-9].[1-2][0-9][0-9][0-9]/))return this.handleBadInput(e);a=t.slice(0,2).replace(/[^0-9]/g,""),s=t.slice(3,5).replace(/[^0-9]/g,""),n=t.slice(6,10).replace(/[^0-9]/g,"")}else if(this.props.dateFormat.match(/DD.MM.YYYY/)){if(!t.match(/[0-3][0-9].[0-1][0-9].[1-2][0-9][0-9][0-9]/))return this.handleBadInput(e);s=t.slice(0,2).replace(/[^0-9]/g,""),a=t.slice(3,5).replace(/[^0-9]/g,""),n=t.slice(6,10).replace(/[^0-9]/g,"")}else{if(!t.match(/[1-2][0-9][0-9][0-9].[0-1][0-9].[0-3][0-9]/))return this.handleBadInput(e);n=t.slice(0,4).replace(/[^0-9]/g,""),a=t.slice(5,7).replace(/[^0-9]/g,""),s=t.slice(8,10).replace(/[^0-9]/g,"")}var r=parseInt(a,10),o=parseInt(s,10),i=parseInt(n,10);if(r>12||o>31)return this.handleBadInput(e);var p=this.props.minDate&&Date.parse(e)<Date.parse(this.props.minDate),l=this.props.maxDate&&Date.parse(e)>Date.parse(this.props.maxDate);if(p||l)return this.handleBadInput(e);if(!isNaN(r)&&!isNaN(o)&&!isNaN(i)&&r<=12&&o<=31&&i>999){var c=new Date(i,r-1,o,12,0,0,0);this.setState({selectedDate:c,displayDate:c,value:c.toISOString()}),this.props.onChange&&this.props.onChange(c.toISOString(),t)}this.setState({inputValue:t})}else this.clear()}onChangeMonth(e){this.setState({displayDate:e})}onChangeDate(e){var t=this.makeInputValueString(e);if(this.setState({inputValue:t,selectedDate:e,displayDate:e,value:e.toISOString(),focused:!1}),this.props.onBlur){var a=document.createEvent("CustomEvent");a.initEvent("Change Date",!0,!1),this.hiddenInputRef.current.dispatchEvent(a),this.props.onBlur(a)}this.props.onChange&&this.props.onChange(e.toISOString(),t)}UNSAFE_componentWillReceiveProps(e){var t=e.value;this.getValue()!==t&&this.setState(this.makeDateValues(t))}renderInputGroup(t){return null!=this.props.customInputGroup?e.cloneElement(this.props.customInputGroup,{children:t}):e.createElement(a,{size:this.props.size,id:"rdp-input-group-".concat(this.idSuffix),className:"rdp-input-group".concat(this.props.invalid?" is-invalid":"").concat(this.props.valid?" is-valid":"")},t)}render(){var t=e.createElement(g,{previousButtonElement:this.props.previousButtonElement,nextButtonElement:this.props.nextButtonElement,displayDate:this.state.displayDate,minDate:this.props.minDate,maxDate:this.props.maxDate,onChange:e=>this.onChangeMonth(e),monthLabels:this.props.monthLabels,dateFormat:this.props.dateFormat}),a=e.createElement(y,{cellPadding:this.props.cellPadding,selectedDate:this.state.selectedDate,displayDate:this.state.displayDate,onChange:e=>this.onChangeDate(e),dayLabels:this.state.dayLabels,weekStartsOn:this.props.weekStartsOn,showTodayButton:this.props.showTodayButton,todayButtonLabel:this.props.todayButtonLabel,minDate:this.props.minDate,maxDate:this.props.maxDate,roundedCorners:this.props.roundedCorners,showWeeks:this.props.showWeeks}),p="rdp-form-control-".concat(this.idSuffix);null!=this.props.customControl&&this.props.customControl.props.id&&(p=this.props.customControl.props.id);var c=this.props.customControl?e.cloneElement(this.props.customControl,{id:p,onKeyDown:e=>this.handleKeyDown(e),value:this.state.inputValue||"",required:this.props.required,placeholder:this.state.placeholder,ref:this.inputRef,disabled:this.props.disabled,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onChange:()=>this.handleInputChange(),className:"rdp-form-control ".concat(this.props.className||""," ").concat(this.props.customControl.props.className||""),style:l(l({},this.props.customControl.props.style||{}),this.props.style||{}),autoComplete:this.props.autoComplete,onInvalid:this.props.onInvalid,noValidate:this.props.noValidate}):e.createElement(s,{id:p,onKeyDown:e=>this.handleKeyDown(e),value:this.state.inputValue||"",required:this.props.required,innerRef:this.inputRef,type:"text",className:"rdp-form-control ".concat(this.props.className||""),style:this.props.style,autoFocus:this.props.autoFocus,disabled:this.props.disabled,placeholder:this.state.placeholder,onFocus:()=>this.handleFocus(),onBlur:()=>this.handleBlur(),onChange:()=>this.handleInputChange(),autoComplete:this.props.autoComplete,onInvalid:this.props.onInvalid,noValidate:this.props.noValidate});return this.renderInputGroup(e.createElement(e.Fragment,null,c,e.createElement(n,{className:"rdp-popover ".concat(this.state.calendarPlacement),toggle:()=>this.handleHide(),isOpen:this.state.focused,container:this.props.calendarContainer||this.overlayContainerRef.current,target:p,placement:this.state.calendarPlacement,delay:200},e.createElement(r,{tag:"div"},t),e.createElement(o,null,a)),e.createElement("div",{ref:this.overlayContainerRef,className:"rdp-overlay"}),e.createElement("input",{ref:this.hiddenInputRef,type:"hidden",className:"rdp-hidden",id:null!=this.props.id?this.props.id:"rdp-hidden-".concat(this.idSuffix),name:this.props.name,value:this.state.value||"","data-formattedvalue":this.state.value?this.state.inputValue:""}),this.props.showClearButton&&!this.props.customControl&&e.createElement(i,{onClick:()=>this.props.disabled?null:this.clear(),style:{opacity:this.state.inputValue&&!this.props.disabled?1:.5,cursor:this.state.inputValue&&!this.props.disabled?"pointer":"not-allowed"},className:"rdp-addon"},this.props.clearButtonElement),this.props.children))}}var v=m.oneOfType([m.func,m.shape({current:m.instanceOf(m.element)})]);f.propTypes={defaultValue:m.string,value:m.string,required:m.bool,className:m.string,style:m.object,minDate:m.string,maxDate:m.string,cellPadding:m.string,autoComplete:m.string,placeholder:m.string,dayLabels:m.array,monthLabels:m.array,onChange:m.func,onClear:m.func,onBlur:m.func,onFocus:m.func,autoFocus:m.bool,disabled:m.bool,weekStartsOn:m.number,clearButtonElement:m.oneOfType([m.string,m.object]),showClearButton:m.bool,previousButtonElement:m.oneOfType([m.string,m.object]),nextButtonElement:m.oneOfType([m.string,m.object]),calendarPlacement:m.oneOfType([m.string,m.func]),dateFormat:m.string,size:m.string,calendarContainer:m.object,id:m.string,name:m.string,showTodayButton:m.bool,todayButtonLabel:m.string,customControl:m.object,roundedCorners:m.bool,showWeeks:m.bool,children:m.oneOfType([m.arrayOf(m.node),m.node]),onInvalid:m.func,noValidate:m.bool,valid:m.bool,invalid:m.bool,customInputGroup:m.object,inputRef:v};var b;f.defaultProps={cellPadding:"5px",dayLabels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],clearButtonElement:"×",previousButtonElement:"<",nextButtonElement:">",calendarPlacement:"bottom",dateFormat:(b="undefined"!=typeof window&&window.navigator?(window.navigator.userLanguage||window.navigator.language||"").toLowerCase():"",b&&"en-us"!==b?"DD/MM/YYYY":"MM/DD/YYYY"),showClearButton:!0,autoFocus:!1,disabled:!1,showTodayButton:!1,todayButtonLabel:"Today",autoComplete:"on",showWeeks:!1,roundedCorners:!1,noValidate:!1};export{f as default};
